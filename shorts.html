---
title: Short News
layout: plain
---
<div id="news-container">
    <p>Loading news...</p>
</div>
<style>
    .item {
        border: 1px solid #ccc;
        padding: 15px;
        margin: 10px 0;
        border-radius: 5px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
    }
    .item h4 {
        margin: 0 0 10px;
    }
    .item p {
        margin: 5px 0;
    }
</style>
<script>
    async function fetchNews() {
        try {
            const externalFeedUrl = 'https://metalama.micro.blog/feed.json';
            const localFeedUrl = '{{ site.url }}/feed.json';

            const [externalResponse, localResponse] = await Promise.all([
                fetch(externalFeedUrl),
                fetch(localFeedUrl)
            ]);

            const [externalData, localData] = await Promise.all([
                externalResponse.json(),
                localResponse.json()
            ]);

            const allItems = [...externalData.items, ...localData.items];

            allItems.sort((a, b) => new Date(b.date_published) - new Date(a.date_published));

            const topItems = allItems.slice(0, 10); // Limit to top 10 news

            const container = document.getElementById('news-container');
            container.innerHTML = '';

            topItems.forEach(item => {
                const article = document.createElement('article');
                article.className = 'item'; // Add class "item"

                const content = document.createElement('div');
                if (item.url.startsWith('{{ site.url }}')) {
                      article.innerHTML = `<h4><a href="${item.url}" target="_blank">Blogged: ${item.title}</a></h4>
                    <p>${new Date(item.date_published).toLocaleDateString()}</p>`;
                    content.innerHTML = `<div>` + item.summary + `</div><p class="read"><a href="${item.url}">Read article...</a></p>`;
                } else {
                    article.innerHTML = `<div>${new Date(item.date_published).toLocaleDateString()}</div>`;
                    content.innerHTML = item.content_html;
                }
                article.appendChild(content);
                container.appendChild(article);
            });
        } catch (error) {
            document.getElementById('news-container').innerHTML = '<p>Failed to load news. Please try again later.</p>';
            console.error('Error fetching news:', error);
        }
    }

    fetchNews();
</script>

